<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.gdsdxy.campustrading.common.mapper.CartMapper">
    <select id="getCartDetailList" resultType="cn.gdsdxy.campustrading.common.model.vo.userVo.CartVo">
        SELECT
            c.cart_id,
            c.product_id,
            p.product_name,
            pi.image_url as productImage,
            p.price,
            p.is_bargainable,
            p.stock,
            c.created_at
        FROM cart c
                 LEFT JOIN products p ON c.product_id = p.product_id
                 LEFT JOIN product_images pi ON p.product_id = pi.product_id AND pi.sort_order = 0
        WHERE c.user_id = #{userId}
        ORDER BY c.created_at DESC
    </select>
</mapper>
